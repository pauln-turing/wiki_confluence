You are given:
1. A SQL schema that contains CREATE TABLE and ALTER TABLE statements.
2. Examples showing how to extract (a) standard foreign keys and (b) generic/typed foreign keys into YAML.

Example A — standard FKs

SQL:
ALTER TABLE `homes` ADD FOREIGN KEY (`address_id`) REFERENCES `addresses` (`address_id`);
ALTER TABLE `users` ADD FOREIGN KEY (`user_id`) REFERENCES `homes` (`owner_id`);

YAML:
foreign_keys:

  - parent_table: homes
    parent_column: address_id
    child_table: addresses
    child_column: address_id
    type: 1:1

  - parent_table: users
    parent_column: user_id
    child_table: homes
    child_column: owner_id
    type: 1:N


Example B — generic (typed) FKs

Pattern: A table has a type-discriminator column (often ENUM of table names) and a companion ID column. For each enum value, map to the referenced table and its PK column discovered from CREATE TABLE definitions.

SQL:
CREATE TABLE `notifications` (
  `notification_id` int PRIMARY KEY,
  `class` enum(funds,investors,portfolios,trades,invoices,reports,documents,subscriptions,commitments,redemptions) NOT NULL,
  `reference_id` int
);

YAML:
generic_foreign_keys:
  - child_table: notifications
    type_column: class
    id_column: reference_id
    mapping:
      funds:
        parent_table: funds
        parent_column: fund_id
      investors:
        parent_table: investors
        parent_column: investor_id
      portfolios:
        parent_table: portfolios
        parent_column: portfolio_id
      trades:
        parent_table: trades
        parent_column: trade_id
      invoices:
        parent_table: invoices
        parent_column: invoice_id
      reports:
        parent_table: reports
        parent_column: report_id
      documents:
        parent_table: documents
        parent_column: document_id
      subscriptions:
        parent_table: subscriptions
        parent_column: subscription_id
      commitments:
        parent_table: commitments
        parent_column: commitment_id
      redemptions:
        parent_table: redemptions
        parent_column: redemption_id


Task:
From the SQL schema I will provide, extract:
1) **All standard foreign key constraints** from `ALTER TABLE ... ADD FOREIGN KEY ... REFERENCES ...` statements into `foreign_keys:`.
2) **All generic (typed) foreign keys** where a table contains a discriminator column (ENUM of table names like `class`, `reference_type`, etc.) plus a companion ID column (e.g., `reference_id`). For each enum value, emit a mapping entry whose `parent_table` is that enum value and whose `parent_column` is the actual PRIMARY KEY column of that parent table as defined in the CREATE TABLE statements (e.g., instruments → instrument_id, instrument_prices → price_id, nav_records → nav_id). Use the **correct IDs as per the database schema**—do not assume names.

Output rules:
- Output **only** YAML in a single code block (no explanations, no extra text).
- Table and column names must be lowercase and without backticks.
- For each standard FK, include:
  - `parent_table`: table containing the referenced PK
  - `parent_column`: column in the parent table being referenced
  - `child_table`: table containing the FK
  - `child_column`: column in the child table that references the parent
  - `type`: `"1:1"` if the FK column is also the child table’s PRIMARY KEY, otherwise `"1:N"`
- Always include the `foreign_keys:` key (empty list if none).
- Include `generic_foreign_keys:` **only if** at least one generic relationship is detected.
- Preserve the order of enum values from SQL when producing `mapping:` keys.

**My schema:**
Enum user_role {
  global_admin
  space_admin
  space_member
  anonymous
  reviewer_approver
  guest
  project_team_admin
  content_contributor
}

Enum permission_type {
  view
  edit
  admin
}

Enum space_feature_type {
  live_docs
  calendars
  whiteboard
  databases
  smart_links
  folders
  blogs
}

Enum content_state {
  draft
  published
  archived
}

Enum audit_action_type {
  create_space
  update_space
  delete_space
  manage_permissions
  grant_admin_rights
  configure_settings
  export_space
  import_space
  create_page
  update_page
  delete_page
  move_page
  rename_page
  add_comment
  add_label
  restore_version
  clone_page
  unpublish_page
  add_restriction
  remove_restriction
  archive_content
  add_attachment
  remove_attachment
  watch_content
  unwatch_content
}

Enum export_format {
  PDF
  HTML
  XML
}

Enum export_job_status {
  pending
  running
  completed
  failed
  cancelled
}

Enum content_format {
  markdown
  html
  richtext
}

Enum approval_status {
  pending
  in_review
  approved
  rejected
  cancelled
}

Enum decision_type {
  approve
  reject
  escalate
  cancel
}

Table users {
  user_id varchar [primary key]
  email varchar [unique, not null]
  account_id varchar
  full_name varchar
  global_role user_role [default: 'anonymous', not null]
  created_at datetime [not null]
}

Table groups {
  group_id varchar [primary key]
  group_name varchar [unique, not null]
  created_at datetime [not null]
}

Table user_groups {
  user_id varchar [not null]
  group_id varchar [not null]
  joined_at datetime [not null]

  indexes {
    (user_id, group_id) [unique]
  }
}

Table spaces {
  space_id varchar [primary key]
  space_key varchar [unique, not null]
  space_name varchar [not null]
  space_purpose text
  created_by_user_id varchar [not null]
  created_at datetime [not null]
  is_deleted boolean [not null, default: false]
  deleted_at datetime
}

Table space_memberships {
  user_id varchar [not null]
  space_id varchar [not null]
  role user_role [not null, default: 'space_member']
  joined_at datetime [not null]

  indexes {
    (user_id, space_id) [unique]
  }
}

Table space_features {
  feature_id varchar [primary key]
  space_id varchar [not null]
  feature_type space_feature_type [not null]
  is_enabled boolean [not null, default: true]
}

Table pages {
  page_id varchar [primary key]
  space_id varchar [not null]
  parent_page_id varchar
  title varchar [not null]
  content_format content_format [not null, default: 'markdown']
  current_version int [default: 1, not null]
  state content_state [not null, default: 'draft']
  created_by_user_id varchar [not null]
  updated_by_user_id varchar
  created_at datetime [not null]
  updated_at datetime
  is_trashed boolean [not null, default: false]
  is_published boolean [not null, default: false]
}

Table page_versions {
  version_id varchar [primary key]
  page_id varchar [not null]
  version_number int [not null]
  editor_user_id varchar [not null]
  edited_at datetime [not null]
  content_snapshot text

  indexes {
    (page_id, version_number) [unique]
  }
}

Table permissions {
  permission_id varchar [primary key]
  space_id varchar
  page_id varchar
  user_id varchar
  group_id varchar
  permission_type permission_type [not null]
  granted_by_user_id varchar [not null]
  granted_at datetime [not null]
  is_active boolean [not null, default: true]
  revoked_by_user_id varchar
  revoked_at datetime
  expires_at datetime


  note: "Either user_id or group_id must be non-null; both cannot be set simultaneously."
}

Table watchers {
  watcher_id varchar [primary key]
  user_id varchar
  group_id varchar
  space_id varchar
  page_id varchar
  watched_at datetime [not null]
}

Table export_jobs {
  job_id varchar [primary key]
  space_id varchar [not null]
  requested_by_user_id varchar [not null]
  requested_at datetime [not null]
  status export_job_status [not null, default: 'pending']
  format export_format [not null]
  destination varchar
  estimated_size_kb int
  priority int [default: 0]
}

Table audit_logs {
  log_id varchar [primary key]
  actor_user_id varchar [not null]
  action_type audit_action_type [not null]
  target_entity_type varchar [not null]
  target_entity_id varchar [not null]
  occurred_at datetime [not null]
  details json
}

Table space_config_history {
  history_id varchar [primary key]
  space_id varchar [not null]
  changed_by_user_id varchar [not null]
  changed_at datetime [not null]
  config_version int [not null]
  old_config json
  new_config json
}

Table approval_requests {
  request_id varchar [primary key]
  target_entity_type varchar [not null] 
  target_entity_id varchar [not null]
  requested_by_user_id varchar [not null]
  status approval_status [not null, default: 'pending']
  reason text
  created_at datetime [not null]
  updated_at datetime
  due_at datetime
  metadata json
}

Table approval_decisions {
  decision_id varchar [primary key]
  step_id varchar [not null]
  approver_user_id varchar [not null]
  decision decision_type [not null]
  comment text
  decided_at datetime [not null]
}

Table notifications {
  notification_id varchar [primary key]
  recipient_user_id varchar [not null]
  event_type varchar [not null] 
  message text [not null]
  related_entity_type varchar 
  related_entity_id varchar
  sender_user_id varchar
  channel varchar [not null, default: 'system'] 
  delivery_status varchar [not null, default: 'pending'] 
  created_at datetime [not null]
  sent_at datetime
  read_at datetime
  metadata json
}




Ref space_user_creator: spaces.created_by_user_id > users.user_id
Ref page_space: pages.space_id > spaces.space_id
Ref page_parent: pages.parent_page_id > pages.page_id
Ref page_user_creator: pages.created_by_user_id > users.user_id
Ref page_user_updater: pages.updated_by_user_id > users.user_id
Ref page_versions_page: page_versions.page_id > pages.page_id
Ref page_versions_editor: page_versions.editor_user_id > users.user_id
Ref permissions_space: permissions.space_id > spaces.space_id
Ref permissions_page: permissions.page_id > pages.page_id
Ref permissions_user: permissions.user_id > users.user_id
Ref permissions_group: permissions.group_id > groups.group_id
Ref permissions_revoked_by: permissions.revoked_by_user_id > users.user_id
Ref space_features_space: space_features.space_id > spaces.space_id
Ref audit_logs_actor: audit_logs.actor_user_id > users.user_id
Ref export_jobs_space: export_jobs.space_id > spaces.space_id
Ref export_jobs_user: export_jobs.requested_by_user_id > users.user_id
Ref space_memberships_user: space_memberships.user_id > users.user_id
Ref space_memberships_space: space_memberships.space_id > spaces.space_id
Ref user_groups_user: user_groups.user_id > users.user_id
Ref user_groups_group: user_groups.group_id > groups.group_id
Ref watchers_user: watchers.user_id > users.user_id
Ref watchers_group: watchers.group_id > groups.group_id
Ref watchers_space: watchers.space_id > spaces.space_id
Ref watchers_page: watchers.page_id > pages.page_id
Ref space_config_history_space: space_config_history.space_id > spaces.space_id
Ref notifications_recipient: notifications.recipient_user_id > users.user_id
Ref notifications_sender: notifications.sender_user_id > users.user_id
Ref ar_requester: approval_requests.requested_by_user_id > users.user_id
