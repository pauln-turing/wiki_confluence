foreign_keys:
  - parent_table: users
    parent_column: user_id
    child_table: spaces
    child_column: created_by_user_id
    type: 1:N
  - parent_table: spaces
    parent_column: space_id
    child_table: pages
    child_column: space_id
    type: 1:N
  - parent_table: pages
    parent_column: page_id
    child_table: pages
    child_column: parent_page_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: pages
    child_column: created_by_user_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: pages
    child_column: updated_by_user_id
    type: 1:N
  - parent_table: pages
    parent_column: page_id
    child_table: page_versions
    child_column: page_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: page_versions
    child_column: editor_user_id
    type: 1:N
  - parent_table: spaces
    parent_column: space_id
    child_table: permissions
    child_column: space_id
    type: 1:N
  - parent_table: pages
    parent_column: page_id
    child_table: permissions
    child_column: page_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: permissions
    child_column: user_id
    type: 1:N
  - parent_table: groups
    parent_column: group_id
    child_table: permissions
    child_column: group_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: permissions
    child_column: revoked_by_user_id
    type: 1:N
  - parent_table: spaces
    parent_column: space_id
    child_table: space_features
    child_column: space_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: audit_logs
    child_column: actor_user_id
    type: 1:N
  - parent_table: spaces
    parent_column: space_id
    child_table: export_jobs
    child_column: space_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: export_jobs
    child_column: requested_by_user_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: space_memberships
    child_column: user_id
    type: 1:N
  - parent_table: spaces
    parent_column: space_id
    child_table: space_memberships
    child_column: space_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: user_groups
    child_column: user_id
    type: 1:N
  - parent_table: groups
    parent_column: group_id
    child_table: user_groups
    child_column: group_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: watchers
    child_column: user_id
    type: 1:N
  - parent_table: groups
    parent_column: group_id
    child_table: watchers
    child_column: group_id
    type: 1:N
  - parent_table: spaces
    parent_column: space_id
    child_table: watchers
    child_column: space_id
    type: 1:N
  - parent_table: pages
    parent_column: page_id
    child_table: watchers
    child_column: page_id
    type: 1:N
  - parent_table: spaces
    parent_column: space_id
    child_table: space_config_history
    child_column: space_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: notifications
    child_column: recipient_user_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: notifications
    child_column: sender_user_id
    type: 1:N
  - parent_table: users
    parent_column: user_id
    child_table: approval_requests
    child_column: requested_by_user_id
    type: 1:N

generic_foreign_keys:
  - child_table: notifications
    type_column: related_entity_type
    id_column: related_entity_id
    mapping:
      users:
        parent_table: users
        parent_column: user_id
      groups:
        parent_table: groups
        parent_column: group_id
      spaces:
        parent_table: spaces
        parent_column: space_id
      pages:
        parent_table: pages
        parent_column: page_id
      page_versions:
        parent_table: page_versions
        parent_column: version_id
      permissions:
        parent_table: permissions
        parent_column: permission_id
      export_jobs:
        parent_table: export_jobs
        parent_column: job_id
      audit_logs:
        parent_table: audit_logs
        parent_column: log_id
      space_config_history:
        parent_table: space_config_history
        parent_column: history_id
      approval_requests:
        parent_table: approval_requests
        parent_column: request_id
      approval_decisions:
        parent_table: approval_decisions
        parent_column: decision_id